<div class="container">
  <h1>Employee Management</h1>

  <!-- Button to trigger the modal -->
  <!-- <button class="btn btn-primary" (click)="openModal()">Add New Employee</button> -->

  <!-- Modal Structure -->
  <div class="content">
    <h2>Add New Employee</h2>

    <form class="form-inline" (submit)="onSubmit()">
      <input type="text" placeholder="First Name" [(ngModel)]="newEmployee.firstName" name="firstName" required />
      <input type="text" placeholder="Last Name" [(ngModel)]="newEmployee.lastName" name="lastName" required />
      <input type="date" placeholder="Date of Birth" [(ngModel)]="newEmployee.dob" name="dob" required />
      <input type="number" placeholder="Age" [(ngModel)]="newEmployee.age" name="age" required />
      <input type="text" placeholder="Salary" [(ngModel)]="newEmployee.salary" name="salary" />
      <input type="text" placeholder="Contact Number" [(ngModel)]="newEmployee.contactNumber" name="contactNumber" />
      <input type="text" placeholder="Email" [(ngModel)]="newEmployee.email" name="email" />
      <input type="text" placeholder="Address" [(ngModel)]="newEmployee.address" name="address" />
      <button type="submit" class="btn">Add Employee</button>
    </form>
  </div>




  <table class="styled-table">
    <thead>
      <tr>
        <th (click)="sortData('index')"># <span [ngClass]="getSortIcon('index')"></span></th>
        <th (click)="sortData('firstName')">Name <span [ngClass]="getSortIcon('firstName')"></span></th>
        <th (click)="sortData('age')">Age <span [ngClass]="getSortIcon('age')"></span></th>
        <th (click)="sortData('dob')">DOB <span [ngClass]="getSortIcon('dob')"></span></th>
        <th (click)="sortData('salary')">Salary <span [ngClass]="getSortIcon('salary')"></span></th>
        <th (click)="sortData('contactNumber')">Contact <span [ngClass]="getSortIcon('contactNumber')"></span></th>
        <th (click)="sortData('email')">Email <span [ngClass]="getSortIcon('email')"></span></th>
        <th (click)="sortData('address')">Address <span [ngClass]="getSortIcon('address')"></span></th>
        <th>Actions</th>
      </tr>
      <tr>
        <th></th> <!-- Skip the index column -->
        <th><input class="small-input" type="text" [(ngModel)]="filters.name" placeholder="Filter by name"
            (input)="applyFilter()" /></th>
        <th><input class="small-input" type="text" [(ngModel)]="filters.age" placeholder="Filter by age"
            (input)="applyFilter()" /></th>
        <th><input class="small-input" type="text" [(ngModel)]="filters.dob" placeholder="Filter by DOB"
            (input)="applyFilter()" /></th>
        <th><input class="small-input" type="text" [(ngModel)]="filters.salary" placeholder="Filter by salary"
            (input)="applyFilter()" /></th>
        <th><input class="small-input" type="text" [(ngModel)]="filters.contactNumber" placeholder="Filter by contact"
            (input)="applyFilter()" /></th>
        <th><input class="small-input" type="text" [(ngModel)]="filters.email" placeholder="Filter by email"
            (input)="applyFilter()" /></th>
        <th><input class="small-input" type="text" [(ngModel)]="filters.address" placeholder="Filter by address"
            (input)="applyFilter()" /></th>
        <th></th> <!-- Skip the actions column -->
      </tr>

    </thead>
    <tbody>
      <tr *ngFor="let employee of paginatedEmployees(); let i = index">
        <td>{{ i + 1 + (currentPage - 1) * pageSize }}</td>
        <td>{{ employee.firstName || 'Unknown' }} {{ employee.lastName || 'Unknown' }}</td>
        <td>{{ employee.age || 'Unknown' }}</td>
        <td>{{ employee.dob || 'Unknown' }}</td>
        <td>{{ employee.salary || 'N/A' }}</td>
        <td>{{ employee.contactNumber || 'N/A' }}</td>
        <td>{{ employee.email || 'N/A' }}</td>
        <td>{{ employee.address || 'N/A' }}</td>
        <td>
          <button class="btn btn-delete" (click)="deleteEmployee(i + (currentPage - 1) * pageSize)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Pagination Controls -->
  <div class="pagination-controls">
    <label for="pageSize">Items per page:</label>
    <select [(ngModel)]="pageSize" (change)="onPageSizeChange()">
      <option *ngFor="let size of [5, 10, 15, 20]" [value]="size">{{ size }}</option>
    </select>
    <button (click)="prevPage()" [disabled]="currentPage === 1">Previous</button>
    <span>Page {{ currentPage }} of {{ totalPages() }}</span>
    <button (click)="nextPage()" [disabled]="currentPage === totalPages()">Next</button>
  </div>
</div>